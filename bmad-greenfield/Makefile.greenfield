# Makefile para BMAD-Method com Gemini CLI - Projetos Greenfield
# Este Makefile automatiza todo o fluxo de trabalho do BMAD-Method para projetos do zero

.PHONY: help install setup-gemini setup-bmad check-deps \
        brainstorm plan-prd plan-arch validate create-epic create-stories \
        implement-story test-connection clean-docs status full-setup \
        greenfield-flow setup-project init-project

# Vari√°veis de configura√ß√£o
GEMINI_CLI_VERSION := latest
PROJECT_NAME ?= meu-projeto
STORY_NUMBER ?= 1.1
MAKEFLAGS += -f Makefile.greenfield

# Configura√ß√£o de modelo Gemini (para evitar quota exceeded)
GEMINI_MODEL ?= gemini-2.5-flash
MODEL_FLAG := --model $(GEMINI_MODEL)

# Configura√ß√£o de idioma para todos os agentes
LANG_INSTRUCTION := "IMPORTANTE: Responda sempre em portugu√™s do Brasil pt-BR. Todos os documentos, c√≥digos, coment√°rios e explica√ß√µes devem estar em portugu√™s brasileiro. Use terminologia t√©cnica em portugu√™s quando poss√≠vel."
AGENT_PREFIX := "Responda em portugu√™s brasileiro."

# Cores para output
RED := \033[0;31m
GREEN := \033[0;32m
YELLOW := \033[1;33m
BLUE := \033[0;34m
PURPLE := \033[0;35m
CYAN := \033[0;36m
NC := \033[0m # No Color

##@ Ajuda e Informa√ß√µes

help: ## üìã Exibir esta mensagem de ajuda
	@echo "$(CYAN)‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó$(NC)"
	@echo "$(CYAN)‚ïë                    BMAD-Method Makefile                      ‚ïë$(NC)"
	@echo "$(CYAN)‚ïë              Automa√ß√£o para Projetos Greenfield             ‚ïë$(NC)"
	@echo "$(CYAN)‚ïë                    (Projetos do Zero)                       ‚ïë$(NC)"
	@echo "$(CYAN)‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù$(NC)"
	@echo ""
	@echo "$(YELLOW)üì¶ INSTALA√á√ÉO E CONFIGURA√á√ÉO:$(NC)"
	@echo "  $(GREEN)make install$(NC)          - Instalar Gemini CLI e BMAD-Method"
	@echo "  $(GREEN)make setup-gemini$(NC)     - Configurar apenas Gemini CLI"
	@echo "  $(GREEN)make setup-bmad$(NC)       - Configurar apenas BMAD-Method"
	@echo "  $(GREEN)make setup-oauth$(NC)      - Configurar autentica√ß√£o OAuth"
	@echo "  $(GREEN)make check-deps$(NC)       - Verificar depend√™ncias instaladas"
	@echo "  $(GREEN)make test-connection$(NC)  - Testar conex√£o com Gemini API"
	@echo "  $(GREEN)make set-model$(NC)        - Escolher modelo Gemini interativamente"
	@echo "  $(GREEN)make change-model$(NC)     - Alterar modelo rapidamente"
	@echo ""
	@echo "$(YELLOW)üöÄ FLUXO COMPLETO (RECOMENDADO):$(NC)"
	@echo "  $(GREEN)make full-setup$(NC)       - Instala√ß√£o completa + configura√ß√£o"
	@echo "  $(GREEN)make greenfield-flow$(NC)  - Executar fluxo completo para greenfield"
	@echo "  $(GREEN)make setup-project$(NC)    - Configurar estrutura inicial do projeto"
	@echo ""
	@echo "$(YELLOW)üí° IDEA√á√ÉO E BRAINSTORMING:$(NC)"
	@echo "  $(GREEN)make brainstorm$(NC)       - Sess√£o de brainstorming para nova ideia"
	@echo "  $(GREEN)make market-research$(NC)  - Pesquisa de mercado e an√°lise"
	@echo ""
	@echo "$(YELLOW)üìä PLANEJAMENTO E DOCUMENTA√á√ÉO:$(NC)"
	@echo "  $(GREEN)make plan-prd$(NC)         - Criar PRD para projeto novo"
	@echo "  $(GREEN)make plan-arch$(NC)        - Criar arquitetura para projeto novo"
	@echo "  $(GREEN)make validate$(NC)         - Executar checklist de valida√ß√£o"
	@echo ""
	@echo "$(YELLOW)üìù CRIA√á√ÉO DE √âPICOS E HIST√ìRIAS:$(NC)"
	@echo "  $(GREEN)make create-epic$(NC)      - Criar √©pico para greenfield"
	@echo "  $(GREEN)make create-stories$(NC)   - Criar hist√≥rias de usu√°rio"
	@echo ""
	@echo "$(YELLOW)üíª IMPLEMENTA√á√ÉO:$(NC)"
	@echo "  $(GREEN)make implement-story$(NC)  - Implementar hist√≥ria espec√≠fica"
	@echo "  $(GREEN)make init-project$(NC)     - Inicializar estrutura do projeto"
	@echo ""
	@echo "$(YELLOW)üîß UTILIT√ÅRIOS:$(NC)"
	@echo "  $(GREEN)make status$(NC)           - Status das instala√ß√µes"
	@echo "  $(GREEN)make clean-docs$(NC)       - Limpar documenta√ß√£o gerada"
	@echo "  $(GREEN)make configure-language$(NC) - Configurar idioma portugu√™s brasileiro"
	@echo "  $(GREEN)make manual-command$(NC)   - Executar comando manual com agente espec√≠fico"
	@echo "  $(GREEN)make dev-help$(NC)         - Comandos √∫teis para desenvolvimento"
	@echo "  $(GREEN)make quota-help$(NC)       - Ajuda para problemas de quota"
	@echo "  $(GREEN)make interactive$(NC)      - Abrir Gemini CLI em modo totalmente interativo"
	@echo ""
	@echo "$(YELLOW)üìñ EXEMPLOS DE USO:$(NC)"
	@echo "  $(CYAN)make install$(NC)                    # Primeira instala√ß√£o"
	@echo "  $(CYAN)make greenfield-flow$(NC)           # Fluxo completo do zero"
	@echo "  $(CYAN)make brainstorm$(NC)                # Come√ßar com brainstorming"
	@echo "  $(CYAN)make implement-story STORY_NUMBER=1.2$(NC)  # Implementar hist√≥ria espec√≠fica"
	@echo "  $(CYAN)make setup-project PROJECT_NAME=minha-app$(NC)  # Configurar projeto espec√≠fico"
	@echo ""
	@echo "$(YELLOW)‚ö†Ô∏è  REQUISITOS:$(NC)"
	@echo "  - Node.js v20+"
	@echo "  - Conta Google para autentica√ß√£o OAuth"
	@echo "  - Ideia ou conceito para novo projeto"
	@echo ""
	@echo "$(YELLOW)üåê IDIOMA:$(NC)"
	@echo "  - Todos os agentes respondem em portugu√™s brasileiro"
	@echo "  - Documentos e c√≥digos gerados em portugu√™s"
	@echo "  - Use 'make configure-language' para ver configura√ß√µes"
	@echo ""
	@echo "$(YELLOW)ü§ñ MODELO GEMINI:$(NC)"
	@echo "  - Padr√£o: $(GEMINI_MODEL) (evita quota exceeded)"
	@echo "  - Para usar Pro: GEMINI_MODEL=gemini-2.5-pro make comando"
	@echo "  - Use 'make set-model' para escolher interativamente"
	@echo "  - Use 'make change-model' para alterar rapidamente"
	@echo ""

##@ Instala√ß√£o e Configura√ß√£o

install: ## üîß Instalar Gemini CLI e BMAD-Method (comando principal)
	@echo "$(CYAN)üöÄ Iniciando instala√ß√£o completa...$(NC)"
	@$(MAKE) -f Makefile.greenfield setup-gemini
	@$(MAKE) -f Makefile.greenfield setup-bmad
	@$(MAKE) -f Makefile.greenfield check-deps
	@echo "$(GREEN)‚úÖ Instala√ß√£o completa finalizada!$(NC)"

setup-gemini: ## ü§ñ Instalar e configurar Gemini CLI
	@echo "$(BLUE)üì¶ Instalando Gemini CLI...$(NC)"
	@if ! command -v gemini >/dev/null 2>&1; then \
		echo "$(YELLOW)‚¨áÔ∏è  Instalando @google/gemini-cli globalmente...$(NC)"; \
		npm install -g @google/gemini-cli; \
	else \
		echo "$(GREEN)‚úÖ Gemini CLI j√° est√° instalado$(NC)"; \
	fi
	@echo "$(BLUE)üîë Configurando autentica√ß√£o OAuth...$(NC)"
	@echo "$(YELLOW)üí° O Gemini CLI usa autentica√ß√£o OAuth (sem necessidade de API Key)$(NC)"
	@echo "$(YELLOW)üí° Se necess√°rio, execute: gemini -p '/auth' para configurar$(NC)"
	@echo "$(BLUE)üß™ Testando instala√ß√£o do Gemini CLI...$(NC)"
	@gemini --version || (echo "$(RED)‚ùå Erro na instala√ß√£o do Gemini CLI$(NC)" && exit 1)
	@echo "$(GREEN)‚úÖ Gemini CLI instalado e configurado com sucesso!$(NC)"

setup-bmad: ## üéØ Instalar e configurar BMAD-Method
	@echo "$(PURPLE)üì¶ Instalando BMAD-Method...$(NC)"
	@echo "$(YELLOW)‚ö†Ô∏è  Durante a instala√ß√£o, selecione 'Gemini CLI' quando perguntado sobre o IDE$(NC)"
	@echo "$(YELLOW)‚ö†Ô∏è  Escolha 'Complete installation' para projetos novos$(NC)"
	@echo "$(BLUE)üîÑ Executando instala√ß√£o interativa...$(NC)"
	@npx bmad-method install
	@echo "$(GREEN)‚úÖ BMAD-Method instalado com sucesso!$(NC)"

setup-oauth: ## üîê Configurar autentica√ß√£o OAuth do Gemini CLI
	@echo "$(BLUE)üîê Configurando autentica√ß√£o OAuth...$(NC)"
	@echo "$(YELLOW)üí° Uma janela do navegador ser√° aberta para autentica√ß√£o$(NC)"
	@echo "$(YELLOW)üí° Fa√ßa login com sua conta Google quando solicitado$(NC)"
	@gemini -p "/auth" || (echo "$(RED)‚ùå Erro na configura√ß√£o OAuth$(NC)" && exit 1)
	@echo "$(GREEN)‚úÖ Autentica√ß√£o OAuth configurada com sucesso!$(NC)"

check-deps: ## ‚úÖ Verificar se todas as depend√™ncias est√£o instaladas
	@echo "$(CYAN)üîç Verificando depend√™ncias...$(NC)"
	@echo "$(BLUE)üìã Verificando Node.js...$(NC)"
	@node --version || (echo "$(RED)‚ùå Node.js n√£o encontrado$(NC)" && exit 1)
	@echo "$(BLUE)üìã Verificando npm...$(NC)"
	@npm --version || (echo "$(RED)‚ùå npm n√£o encontrado$(NC)" && exit 1)
	@echo "$(BLUE)üìã Verificando Gemini CLI...$(NC)"
	@gemini --version || (echo "$(RED)‚ùå Gemini CLI n√£o encontrado$(NC)" && exit 1)
	@echo "$(BLUE)üìã Verificando BMAD-Method...$(NC)"
	@npx bmad-method status || (echo "$(YELLOW)‚ö†Ô∏è  BMAD-Method pode n√£o estar configurado$(NC)")
	@echo "$(BLUE)üìã Verificando autentica√ß√£o OAuth...$(NC)"
	@echo "$(GREEN)‚úÖ Usando autentica√ß√£o OAuth (sem necessidade de API Key)$(NC)"
	@echo "$(YELLOW)üí° Se houver problemas de autentica√ß√£o, execute: gemini -p '/auth'$(NC)"
	@echo "$(GREEN)‚úÖ Todas as depend√™ncias est√£o OK!$(NC)"

test-connection: ## üß™ Testar conex√£o com Gemini API
	@echo "$(BLUE)üîó Testando conex√£o com Gemini API usando $(GEMINI_MODEL)...$(NC)"
	@echo ""
	@echo "$(CYAN)‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó$(NC)"
	@echo "$(CYAN)‚ïë                    TESTE DE CONEX√ÉO                          ‚ïë$(NC)"
	@echo "$(CYAN)‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù$(NC)"
	@echo ""
	@echo "$(YELLOW)1. Abra um novo terminal$(NC)"
	@echo "$(YELLOW)2. Execute o comando abaixo:$(NC)"
	@echo ""
	@echo "$(GREEN)gemini $(MODEL_FLAG)$(NC)"
	@echo ""
	@echo "$(YELLOW)3. Dentro do Gemini CLI, digite:$(NC)"
	@echo ""
	@echo "$(CYAN)Hello, this is a connection test. Please respond with 'Connection successful!'$(NC)"
	@echo ""
	@echo "$(YELLOW)4. Se receber uma resposta, a conex√£o est√° funcionando$(NC)"
	@echo "$(YELLOW)5. Digite '/exit' para sair$(NC)"
	@echo ""
	@printf "$(BLUE)Pressione ENTER quando tiver testado a conex√£o...$(NC)"
	@read dummy
	@echo "$(GREEN)‚úÖ Teste de conex√£o conclu√≠do!$(NC)"
	@echo "$(YELLOW)üí° Se houve problemas, tente: GEMINI_MODEL=gemini-2.5-flash make test-connection$(NC)"

set-model: ## ü§ñ Configurar modelo Gemini interativamente
	@echo "$(CYAN)ü§ñ Configura√ß√£o de Modelo Gemini:$(NC)"
	@echo ""
	@echo "$(BLUE)Modelo atual: $(GEMINI_MODEL)$(NC)"
	@echo ""
	@echo "$(YELLOW)Escolha o modelo:$(NC)"
	@echo "  $(GREEN)1)$(NC) gemini-2.5-flash  - R√°pido, menos quota (RECOMENDADO)"
	@echo "  $(GREEN)2)$(NC) gemini-2.5-pro    - Melhor qualidade, mais quota"
	@echo "  $(GREEN)3)$(NC) Cancelar"
	@echo ""
	@printf "$(CYAN)Digite sua escolha (1-3): $(NC)"; \
	read choice; \
	case $$choice in \
		1) \
			echo "$(GREEN)‚úÖ Configurando gemini-2.5-flash...$(NC)"; \
			sed -i 's/GEMINI_MODEL ?= .*/GEMINI_MODEL ?= gemini-2.5-flash/' bmad-greenfield/Makefile.greenfield; \
			echo "$(GREEN)‚úÖ Modelo alterado para gemini-2.5-flash!$(NC)"; \
			echo "$(BLUE)üí° Reinicie os comandos para aplicar a mudan√ßa$(NC)"; \
			;; \
		2) \
			echo "$(YELLOW)‚ö†Ô∏è  Configurando gemini-2.5-pro...$(NC)"; \
			echo "$(RED)‚ö†Ô∏è  ATEN√á√ÉO: Este modelo pode causar quota exceeded!$(NC)"; \
			sed -i 's/GEMINI_MODEL ?= .*/GEMINI_MODEL ?= gemini-2.5-pro/' bmad-greenfield/Makefile.greenfield; \
			echo "$(GREEN)‚úÖ Modelo alterado para gemini-2.5-pro!$(NC)"; \
			echo "$(BLUE)üí° Reinicie os comandos para aplicar a mudan√ßa$(NC)"; \
			;; \
		3) \
			echo "$(YELLOW)‚ùå Opera√ß√£o cancelada$(NC)"; \
			;; \
		*) \
			echo "$(RED)‚ùå Op√ß√£o inv√°lida. Use 1, 2 ou 3$(NC)"; \
			;; \
	esac

change-model: ## üîÑ Alterar modelo rapidamente (alias para set-model)
	@$(MAKE) -f Makefile.greenfield set-model

quota-help: ## üö® Ajuda para resolver problemas de quota
	@echo "$(RED)üö® Problemas de Quota Gemini$(NC)"
	@echo ""
	@echo "$(YELLOW)Erro 429 - Quota Exceeded:$(NC)"
	@echo "  - Voc√™ atingiu o limite di√°rio do Gemini 2.5 Pro"
	@echo "  - Solu√ß√£o: Use o modelo Flash (mais r√°pido, menos quota)"
	@echo ""
	@echo "$(GREEN)‚úÖ Solu√ß√µes Imediatas:$(NC)"
	@echo "  $(CYAN)1. make brainstorm GEMINI_MODEL=gemini-2.5-flash$(NC)"
	@echo "  $(CYAN)2. export GEMINI_MODEL=gemini-2.5-flash$(NC)"
	@echo "  $(CYAN)3. Editar Makefile: GEMINI_MODEL ?= gemini-2.5-flash$(NC)"
	@echo ""
	@echo "$(BLUE)üí° Dicas:$(NC)"
	@echo "  - Flash: R√°pido, adequado para a maioria das tarefas"
	@echo "  - Pro: Melhor para tarefas complexas (quando quota permitir)"
	@echo "  - Quota reseta diariamente"
	@echo ""
	@echo "$(YELLOW)‚ö° Teste r√°pido:$(NC)"
	@echo "  $(CYAN)make test-connection GEMINI_MODEL=gemini-2.5-flash$(NC)"

##@ Fluxos Completos

full-setup: ## üöÄ Configura√ß√£o completa (instala√ß√£o + verifica√ß√£o + teste)
	@echo "$(CYAN)üöÄ Iniciando configura√ß√£o completa do ambiente...$(NC)"
	@$(MAKE) -f Makefile.greenfield install
	@$(MAKE) -f Makefile.greenfield test-connection
	@echo "$(GREEN)üéâ Ambiente completamente configurado e testado!$(NC)"
	@echo "$(YELLOW)üí° Pr√≥ximo passo: execute 'make greenfield-flow' para come√ßar$(NC)"

greenfield-flow: ## üîÑ Executar fluxo completo para projetos greenfield
	@echo "$(CYAN)üîÑ Iniciando fluxo completo para projeto greenfield...$(NC)"
	@echo "$(YELLOW)üí° Fase 1: Idea√ß√£o e Brainstorming$(NC)"
	@$(MAKE) -f Makefile.greenfield brainstorm
	@echo "$(YELLOW)üìä Fase 2: Planejamento$(NC)"
	@$(MAKE) -f Makefile.greenfield plan-prd
	@$(MAKE) -f Makefile.greenfield plan-arch
	@echo "$(YELLOW)‚úÖ Fase 3: Valida√ß√£o$(NC)"
	@$(MAKE) -f Makefile.greenfield validate
	@echo "$(YELLOW)üìù Fase 4: Cria√ß√£o de √âpicos$(NC)"
	@$(MAKE) -f Makefile.greenfield create-epic
	@echo "$(YELLOW)üèóÔ∏è  Fase 5: Configura√ß√£o do Projeto$(NC)"
	@$(MAKE) -f Makefile.greenfield setup-project
	@echo "$(GREEN)üéâ Fluxo greenfield completo! Pr√≥ximos passos:$(NC)"
	@echo "$(CYAN)  1. make create-stories     # Criar hist√≥rias detalhadas$(NC)"
	@echo "$(CYAN)  2. make implement-story    # Implementar primeira hist√≥ria$(NC)"

setup-project: ## üèóÔ∏è Configurar estrutura inicial do projeto
	@echo "$(BLUE)üèóÔ∏è  Configurando estrutura inicial do projeto '$(PROJECT_NAME)'...$(NC)"
	@echo "$(YELLOW)‚è±Ô∏è  Tempo estimado: 10-15 minutos$(NC)"
	@echo ""
	@echo "$(CYAN)‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó$(NC)"
	@echo "$(CYAN)‚ïë                    COMANDO PARA EXECUTAR                     ‚ïë$(NC)"
	@echo "$(CYAN)‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù$(NC)"
	@echo ""
	@echo "$(YELLOW)1. Abra um novo terminal$(NC)"
	@echo "$(YELLOW)2. Execute o comando abaixo:$(NC)"
	@echo ""
	@echo "$(GREEN)gemini $(MODEL_FLAG)$(NC)"
	@echo ""
	@echo "$(YELLOW)3. Dentro do Gemini CLI, digite:$(NC)"
	@echo ""
	@echo "$(CYAN)$(AGENT_PREFIX) @architect *create-project-structure$(NC)"
	@echo ""
	@echo "$(YELLOW)4. Quando terminar, digite '/exit' para sair$(NC)"
	@echo ""
	@printf "$(BLUE)Pressione ENTER quando tiver conclu√≠do a configura√ß√£o...$(NC)"
	@read dummy
	@echo "$(GREEN)‚úÖ Estrutura do projeto configurada!$(NC)"
	@echo "$(BLUE)üìÅ Estrutura criada para: $(PROJECT_NAME)$(NC)"

##@ Idea√ß√£o e Brainstorming

brainstorm: ## üí° Sess√£o de brainstorming para nova ideia
	@echo "$(PURPLE)üí° Iniciando sess√£o de brainstorming...$(NC)"
	@echo "$(YELLOW)‚è±Ô∏è  Tempo estimado: 15-20 minutos$(NC)"
	@echo "$(YELLOW)üí° Voc√™ explorar√° ideias, mercado e oportunidades$(NC)"
	@echo ""
	@echo "$(CYAN)‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó$(NC)"
	@echo "$(CYAN)‚ïë                    COMANDO PARA EXECUTAR                     ‚ïë$(NC)"
	@echo "$(CYAN)‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù$(NC)"
	@echo ""
	@echo "$(YELLOW)1. Abra um novo terminal$(NC)"
	@echo "$(YELLOW)2. Execute o comando abaixo:$(NC)"
	@echo ""
	@echo "$(GREEN)gemini $(MODEL_FLAG)$(NC)"
	@echo ""
	@echo "$(YELLOW)3. Dentro do Gemini CLI, digite:$(NC)"
	@echo ""
	@echo "$(CYAN)$(AGENT_PREFIX) @analyst *brainstorm$(NC)"
	@echo ""
	@echo "$(YELLOW)4. Quando terminar, digite '/exit' para sair$(NC)"
	@echo ""
	@printf "$(BLUE)Pressione ENTER quando tiver conclu√≠do o brainstorming...$(NC)"
	@read dummy
	@echo "$(GREEN)‚úÖ Sess√£o de brainstorming conclu√≠da!$(NC)"
	@echo "$(BLUE)üìÑ Ideias e insights gerados$(NC)"

market-research: ## üìä Pesquisa de mercado e an√°lise
	@echo "$(BLUE)üìä Realizando pesquisa de mercado...$(NC)"
	@echo "$(YELLOW)‚è±Ô∏è  Tempo estimado: 20-25 minutos$(NC)"
	@echo "$(YELLOW)üí° An√°lise de concorrentes, p√∫blico-alvo e oportunidades$(NC)"
	@echo ""
	@echo "$(CYAN)‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó$(NC)"
	@echo "$(CYAN)‚ïë                    COMANDO PARA EXECUTAR                     ‚ïë$(NC)"
	@echo "$(CYAN)‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù$(NC)"
	@echo ""
	@echo "$(YELLOW)1. Abra um novo terminal$(NC)"
	@echo "$(YELLOW)2. Execute o comando abaixo:$(NC)"
	@echo ""
	@echo "$(GREEN)gemini $(MODEL_FLAG)$(NC)"
	@echo ""
	@echo "$(YELLOW)3. Dentro do Gemini CLI, digite:$(NC)"
	@echo ""
	@echo "$(CYAN)$(AGENT_PREFIX) @analyst *market-research$(NC)"
	@echo ""
	@echo "$(YELLOW)4. Quando terminar, digite '/exit' para sair$(NC)"
	@echo ""
	@printf "$(BLUE)Pressione ENTER quando tiver conclu√≠do a pesquisa...$(NC)"
	@read dummy
	@echo "$(GREEN)‚úÖ Pesquisa de mercado conclu√≠da!$(NC)"
	@echo "$(BLUE)üìÑ Documento gerado: docs/market-analysis.md$(NC)"

##@ Planejamento e Documenta√ß√£o

plan-prd: ## üìã Criar PRD para projeto novo
	@echo "$(PURPLE)üìã Criando PRD para projeto greenfield...$(NC)"
	@echo "$(YELLOW)‚è±Ô∏è  Tempo estimado: 20-30 minutos$(NC)"
	@echo "$(YELLOW)üí° Voc√™ definir√° funcionalidades, usu√°rios e objetivos$(NC)"
	@echo ""
	@echo "$(CYAN)‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó$(NC)"
	@echo "$(CYAN)‚ïë                    COMANDO PARA EXECUTAR                     ‚ïë$(NC)"
	@echo "$(CYAN)‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù$(NC)"
	@echo ""
	@echo "$(YELLOW)1. Abra um novo terminal$(NC)"
	@echo "$(YELLOW)2. Execute o comando abaixo:$(NC)"
	@echo ""
	@echo "$(GREEN)gemini $(MODEL_FLAG)$(NC)"
	@echo ""
	@echo "$(YELLOW)3. Dentro do Gemini CLI, digite:$(NC)"
	@echo ""
	@echo "$(CYAN)$(AGENT_PREFIX) @pm *create-doc prd$(NC)"
	@echo ""
	@echo "$(YELLOW)4. Quando terminar, digite '/exit' para sair$(NC)"
	@echo ""
	@printf "$(BLUE)Pressione ENTER quando tiver conclu√≠do a cria√ß√£o do PRD...$(NC)"
	@read dummy
	@echo "$(GREEN)‚úÖ PRD para greenfield criado!$(NC)"
	@echo "$(BLUE)üìÑ Documento gerado: docs/prd.md$(NC)"

plan-arch: ## üèóÔ∏è Criar arquitetura para projeto novo
	@echo "$(CYAN)üèóÔ∏è  Criando arquitetura para projeto greenfield...$(NC)"
	@echo "$(YELLOW)‚è±Ô∏è  Tempo estimado: 25-35 minutos$(NC)"
	@echo "$(YELLOW)üí° Voc√™ definir√° tecnologias, estrutura e padr√µes$(NC)"
	@echo ""
	@echo "$(CYAN)‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó$(NC)"
	@echo "$(CYAN)‚ïë                    COMANDO PARA EXECUTAR                     ‚ïë$(NC)"
	@echo "$(CYAN)‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù$(NC)"
	@echo ""
	@echo "$(YELLOW)1. Abra um novo terminal$(NC)"
	@echo "$(YELLOW)2. Execute o comando abaixo:$(NC)"
	@echo ""
	@echo "$(GREEN)gemini $(MODEL_FLAG)$(NC)"
	@echo ""
	@echo "$(YELLOW)3. Dentro do Gemini CLI, digite:$(NC)"
	@echo ""
	@echo "$(CYAN)$(AGENT_PREFIX) @architect *create-doc architecture$(NC)"
	@echo ""
	@echo "$(YELLOW)4. Quando terminar, digite '/exit' para sair$(NC)"
	@echo ""
	@printf "$(BLUE)Pressione ENTER quando tiver conclu√≠do a cria√ß√£o da arquitetura...$(NC)"
	@read dummy
	@echo "$(GREEN)‚úÖ Arquitetura para greenfield criada!$(NC)"
	@echo "$(BLUE)üìÑ Documento gerado: docs/architecture.md$(NC)"

validate: ## ‚úÖ Executar checklist de valida√ß√£o
	@echo "$(GREEN)‚úÖ Executando checklist de valida√ß√£o...$(NC)"
	@echo "$(YELLOW)‚è±Ô∏è  Tempo estimado: 10-15 minutos$(NC)"
	@echo "$(YELLOW)üí° Revise cada item apresentado cuidadosamente$(NC)"
	@echo ""
	@echo "$(CYAN)‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó$(NC)"
	@echo "$(CYAN)‚ïë                    COMANDO PARA EXECUTAR                     ‚ïë$(NC)"
	@echo "$(CYAN)‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù$(NC)"
	@echo ""
	@echo "$(YELLOW)1. Abra um novo terminal$(NC)"
	@echo "$(YELLOW)2. Execute o comando abaixo:$(NC)"
	@echo ""
	@echo "$(GREEN)gemini $(MODEL_FLAG)$(NC)"
	@echo ""
	@echo "$(YELLOW)3. Dentro do Gemini CLI, digite:$(NC)"
	@echo ""
	@echo "$(CYAN)$(AGENT_PREFIX) @po *execute-checklist po-master-checklist$(NC)"
	@echo ""
	@echo "$(YELLOW)4. Quando terminar, digite '/exit' para sair$(NC)"
	@echo ""
	@printf "$(BLUE)Pressione ENTER quando tiver conclu√≠do a valida√ß√£o...$(NC)"
	@read dummy
	@echo "$(GREEN)‚úÖ Valida√ß√£o conclu√≠da!$(NC)"

##@ Cria√ß√£o de √âpicos e Hist√≥rias

create-epic: ## üìù Criar √©pico para greenfield
	@echo "$(PURPLE)üìù Criando √©pico para projeto greenfield...$(NC)"
	@echo "$(YELLOW)üí° Voc√™ definir√° funcionalidades principais e MVP$(NC)"
	@echo ""
	@echo "$(CYAN)‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó$(NC)"
	@echo "$(CYAN)‚ïë                    COMANDO PARA EXECUTAR                     ‚ïë$(NC)"
	@echo "$(CYAN)‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù$(NC)"
	@echo ""
	@echo "$(YELLOW)1. Abra um novo terminal$(NC)"
	@echo "$(YELLOW)2. Execute o comando abaixo:$(NC)"
	@echo ""
	@echo "$(GREEN)gemini $(MODEL_FLAG)$(NC)"
	@echo ""
	@echo "$(YELLOW)3. Dentro do Gemini CLI, digite:$(NC)"
	@echo ""
	@echo "$(CYAN)$(AGENT_PREFIX) @pm *greenfield-create-epic$(NC)"
	@echo ""
	@echo "$(YELLOW)4. Quando terminar, digite '/exit' para sair$(NC)"
	@echo ""
	@printf "$(BLUE)Pressione ENTER quando tiver conclu√≠do a cria√ß√£o do √©pico...$(NC)"
	@read dummy
	@echo "$(GREEN)‚úÖ √âpico criado com sucesso!$(NC)"

create-stories: ## üìñ Criar hist√≥rias de usu√°rio detalhadas
	@echo "$(BLUE)üìñ Criando hist√≥rias de usu√°rio...$(NC)"
	@echo "$(YELLOW)üí° Execute m√∫ltiplas vezes para criar v√°rias hist√≥rias$(NC)"
	@echo ""
	@echo "$(CYAN)‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó$(NC)"
	@echo "$(CYAN)‚ïë                    COMANDO PARA EXECUTAR                     ‚ïë$(NC)"
	@echo "$(CYAN)‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù$(NC)"
	@echo ""
	@echo "$(YELLOW)1. Abra um novo terminal$(NC)"
	@echo "$(YELLOW)2. Execute o comando abaixo:$(NC)"
	@echo ""
	@echo "$(GREEN)gemini $(MODEL_FLAG)$(NC)"
	@echo ""
	@echo "$(YELLOW)3. Dentro do Gemini CLI, digite:$(NC)"
	@echo ""
	@echo "$(CYAN)$(AGENT_PREFIX) @sm create-next-story$(NC)"
	@echo ""
	@echo "$(YELLOW)4. Quando terminar, digite '/exit' para sair$(NC)"
	@echo ""
	@printf "$(BLUE)Pressione ENTER quando tiver conclu√≠do a cria√ß√£o da hist√≥ria...$(NC)"
	@read dummy
	@echo "$(GREEN)‚úÖ Hist√≥ria criada!$(NC)"
	@echo "$(BLUE)üí° Para criar mais hist√≥rias, execute: make create-stories$(NC)"

##@ Implementa√ß√£o

implement-story: ## üíª Implementar hist√≥ria espec√≠fica
	@echo "$(GREEN)üíª Implementando hist√≥ria $(STORY_NUMBER)...$(NC)"
	@echo "$(YELLOW)üí° Use STORY_NUMBER=X.Y para especificar a hist√≥ria$(NC)"
	@echo ""
	@echo "$(CYAN)‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó$(NC)"
	@echo "$(CYAN)‚ïë                    COMANDO PARA EXECUTAR                     ‚ïë$(NC)"
	@echo "$(CYAN)‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù$(NC)"
	@echo ""
	@echo "$(YELLOW)1. Abra um novo terminal$(NC)"
	@echo "$(YELLOW)2. Execute o comando abaixo:$(NC)"
	@echo ""
	@echo "$(GREEN)gemini $(MODEL_FLAG)$(NC)"
	@echo ""
	@echo "$(YELLOW)3. Dentro do Gemini CLI, digite:$(NC)"
	@echo ""
	@echo "$(CYAN)$(AGENT_PREFIX) @dev implement story $(STORY_NUMBER)$(NC)"
	@echo ""
	@echo "$(YELLOW)4. Quando terminar, digite '/exit' para sair$(NC)"
	@echo ""
	@printf "$(BLUE)Pressione ENTER quando tiver conclu√≠do a implementa√ß√£o da hist√≥ria $(STORY_NUMBER)...$(NC)"
	@read dummy
	@echo "$(GREEN)‚úÖ Hist√≥ria $(STORY_NUMBER) implementada!$(NC)"

init-project: ## üöÄ Inicializar estrutura do projeto
	@echo "$(CYAN)üöÄ Inicializando estrutura do projeto...$(NC)"
	@echo "$(YELLOW)üí° Criar√° arquivos base, depend√™ncias e configura√ß√µes$(NC)"
	@echo ""
	@echo "$(CYAN)‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó$(NC)"
	@echo "$(CYAN)‚ïë                    COMANDO PARA EXECUTAR                     ‚ïë$(NC)"
	@echo "$(CYAN)‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù$(NC)"
	@echo ""
	@echo "$(YELLOW)1. Abra um novo terminal$(NC)"
	@echo "$(YELLOW)2. Execute o comando abaixo:$(NC)"
	@echo ""
	@echo "$(GREEN)gemini $(MODEL_FLAG)$(NC)"
	@echo ""
	@echo "$(YELLOW)3. Dentro do Gemini CLI, digite:$(NC)"
	@echo ""
	@echo "$(CYAN)$(AGENT_PREFIX) @dev *init-project$(NC)"
	@echo ""
	@echo "$(YELLOW)4. Quando terminar, digite '/exit' para sair$(NC)"
	@echo ""
	@printf "$(BLUE)Pressione ENTER quando tiver conclu√≠do a inicializa√ß√£o...$(NC)"
	@read dummy
	@echo "$(GREEN)‚úÖ Projeto inicializado com sucesso!$(NC)"

##@ Utilit√°rios

status: ## üìä Verificar status das instala√ß√µes
	@echo "$(CYAN)üìä Status do ambiente BMAD-Method:$(NC)"
	@echo ""
	@echo "$(BLUE)üîß Depend√™ncias:$(NC)"
	@printf "  Node.js: "
	@node --version 2>/dev/null && echo "$(GREEN)‚úÖ$(NC)" || echo "$(RED)‚ùå$(NC)"
	@printf "  npm: "
	@npm --version 2>/dev/null && echo "$(GREEN)‚úÖ$(NC)" || echo "$(RED)‚ùå$(NC)"
	@printf "  Gemini CLI: "
	@gemini --version 2>/dev/null && echo "$(GREEN)‚úÖ$(NC)" || echo "$(RED)‚ùå$(NC)"
	@echo ""
	@echo "$(BLUE)üîë Configura√ß√£o:$(NC)"
	@printf "  Autentica√ß√£o OAuth: "
	@echo "$(GREEN)‚úÖ Configurada (sem necessidade de API Key)$(NC)"
	@echo ""
	@echo "$(BLUE)üìÅ Estrutura do Projeto:$(NC)"
	@printf "  core-config.yml: "
	@if [ -f "core-config.yml" ]; then echo "$(GREEN)‚úÖ Existe$(NC)"; else echo "$(YELLOW)‚ö†Ô∏è  N√£o encontrado$(NC)"; fi
	@printf "  docs/: "
	@if [ -d "docs" ]; then echo "$(GREEN)‚úÖ Existe$(NC)"; else echo "$(YELLOW)‚ö†Ô∏è  N√£o encontrado$(NC)"; fi
	@printf "  .bmad-core/: "
	@if [ -d ".bmad-core" ]; then echo "$(GREEN)‚úÖ Existe$(NC)"; else echo "$(YELLOW)‚ö†Ô∏è  N√£o encontrado$(NC)"; fi
	@echo ""
	@echo "$(BLUE)üìä Status BMAD-Method:$(NC)"
	@npx bmad-method status 2>/dev/null || echo "$(YELLOW)‚ö†Ô∏è  Execute 'make setup-bmad' para configurar$(NC)"

clean-docs: ## üßπ Limpar documenta√ß√£o gerada
	@echo "$(YELLOW)üßπ Limpando documenta√ß√£o gerada...$(NC)"
	@if [ -d "docs" ]; then \
		echo "$(BLUE)üìÅ Removendo docs/...$(NC)"; \
		rm -rf docs/; \
	fi
	@if [ -d ".ai" ]; then \
		echo "$(BLUE)üìÅ Removendo .ai/...$(NC)"; \
		rm -rf .ai/; \
	fi
	@if [ -f "core-config.yml" ]; then \
		echo "$(BLUE)üìÑ Removendo core-config.yml...$(NC)"; \
		rm -f core-config.yml; \
	fi
	@echo "$(GREEN)‚úÖ Documenta√ß√£o limpa!$(NC)"
	@echo "$(YELLOW)üí° Execute 'make setup-bmad' para reconfigurar$(NC)"

##@ Comandos de Desenvolvimento

configure-language: ## üåê Configurar idioma portugu√™s brasileiro para todos os agentes
	@echo "$(CYAN)üåê Configurando idioma portugu√™s brasileiro...$(NC)"
	@echo "$(BLUE)üìù Instru√ß√£o de idioma configurada:$(NC)"
	@echo "$(YELLOW)$(LANG_INSTRUCTION)$(NC)"
	@echo ""
	@echo "$(GREEN)‚úÖ Todos os comandos do Makefile usar√£o portugu√™s brasileiro!$(NC)"
	@echo "$(BLUE)üí° Para comandos manuais, use sempre o prefixo:$(NC)"
	@echo "$(CYAN)gemini -p '$(LANG_INSTRUCTION) @agente comando'$(NC)"

dev-help: ## üõ†Ô∏è Comandos √∫teis para desenvolvimento
	@echo "$(CYAN)üõ†Ô∏è  Comandos √∫teis do Gemini CLI (em portugu√™s):$(NC)"
	@echo ""
	@echo "$(YELLOW)üìä Sistema:$(NC)"
	@echo "  $(GREEN)gemini -p '/help'$(NC)          - Ajuda do Gemini CLI"
	@echo "  $(GREEN)gemini -p '/stats'$(NC)         - Estat√≠sticas de uso"
	@echo "  $(GREEN)gemini -p '/about'$(NC)         - Informa√ß√µes da vers√£o"
	@echo ""
	@echo "$(YELLOW)üìÅ Arquivos (modo interativo):$(NC)"
	@echo "  $(GREEN)echo '$(LANG_INSTRUCTION) @arquivo.txt Analise este arquivo' | gemini$(NC)"
	@echo "  $(GREEN)echo '$(LANG_INSTRUCTION) @src/ Revise este c√≥digo' | gemini$(NC)"
	@echo ""
	@echo "$(YELLOW)üîß Shell (dentro do Gemini CLI interativo):$(NC)"
	@echo "  $(GREEN)!ls -la$(NC)        - Executar comando shell"
	@echo "  $(GREEN)!git status$(NC)    - Status do git"
	@echo ""
	@echo "$(YELLOW)üé® Configura√ß√£o (dentro do Gemini CLI interativo):$(NC)"
	@echo "  $(GREEN)/theme$(NC)         - Alterar tema"
	@echo "  $(GREEN)/memory show$(NC)   - Mostrar contexto"
	@echo "  $(GREEN)/help$(NC)          - Ajuda completa"
	@echo "  $(GREEN)/exit$(NC)          - Sair do modo interativo"
	@echo ""
	@echo "$(YELLOW)ü§ñ Agentes BMAD (modo interativo):$(NC)"
	@echo "  $(GREEN)echo '$(LANG_INSTRUCTION) @analyst [comando]' | gemini$(NC)"
	@echo "  $(GREEN)echo '$(LANG_INSTRUCTION) @pm [comando]' | gemini$(NC)"
	@echo "  $(GREEN)echo '$(LANG_INSTRUCTION) @architect [comando]' | gemini$(NC)"
	@echo "  $(GREEN)echo '$(LANG_INSTRUCTION) @dev [comando]' | gemini$(NC)"
	@echo "  $(GREEN)echo '$(LANG_INSTRUCTION) @sm [comando]' | gemini$(NC)"
	@echo "  $(GREEN)echo '$(LANG_INSTRUCTION) @po [comando]' | gemini$(NC)"
	@echo "  $(GREEN)echo '$(LANG_INSTRUCTION) @qa [comando]' | gemini$(NC)"
	@echo ""
	@echo "$(YELLOW)üí° Modo Totalmente Interativo:$(NC)"
	@echo "  $(GREEN)gemini$(NC)                    - Abrir CLI interativo"
	@echo "  $(GREEN)gemini $(MODEL_FLAG)$(NC)      - Abrir com modelo espec√≠fico"

interactive: ## üéØ Abrir Gemini CLI em modo totalmente interativo
	@echo "$(CYAN)ü§ñ Abrindo Gemini CLI em modo totalmente interativo...$(NC)"
	@echo "$(BLUE)Modelo: $(GEMINI_MODEL)$(NC)"
	@echo "$(YELLOW)üí° Comandos √∫teis dentro do CLI:$(NC)"
	@echo "  $(GREEN)/help$(NC)          - Ajuda completa"
	@echo "  $(GREEN)/tools$(NC)         - Ver ferramentas dispon√≠veis"
	@echo "  $(GREEN)/mcp$(NC)           - Ver servidores MCP"
	@echo "  $(GREEN)/stats$(NC)         - Estat√≠sticas de uso"
	@echo "  $(GREEN)/exit$(NC)          - Sair"
	@echo ""
	@echo "$(YELLOW)üí° Agentes BMAD dispon√≠veis:$(NC)"
	@echo "  $(GREEN)@analyst$(NC)       - An√°lise e brainstorming"
	@echo "  $(GREEN)@pm$(NC)            - Product Manager"
	@echo "  $(GREEN)@architect$(NC)     - Arquiteto de software"
	@echo "  $(GREEN)@dev$(NC)           - Desenvolvedor"
	@echo "  $(GREEN)@sm$(NC)            - Scrum Master"
	@echo "  $(GREEN)@po$(NC)            - Product Owner"
	@echo "  $(GREEN)@qa$(NC)            - Quality Assurance"
	@echo ""
	@echo "$(YELLOW)üí° Exemplo de uso:$(NC)"
	@echo "  $(CYAN)$(AGENT_PREFIX) @analyst *brainstorm$(NC)"
	@echo ""
	@echo "$(GREEN)üöÄ Iniciando sess√£o interativa...$(NC)"
	@gemini $(MODEL_FLAG)

manual-command: ## üéØ Executar comando manual com agente espec√≠fico (uso: make manual-command AGENT=analyst COMMAND="*brainstorm")
	@if [ -z "$(AGENT)" ] || [ -z "$(COMMAND)" ]; then \
		echo "$(RED)‚ùå Uso: make manual-command AGENT=nome_agente COMMAND=\"comando\"$(NC)"; \
		echo "$(YELLOW)üí° Exemplo: make manual-command AGENT=analyst COMMAND=\"*brainstorm\"$(NC)"; \
		echo "$(YELLOW)üí° Agentes dispon√≠veis: analyst, pm, architect, dev, sm, po, qa$(NC)"; \
		exit 1; \
	fi
	@echo "$(CYAN)ü§ñ Comando manual em portugu√™s (modelo: $(GEMINI_MODEL))...$(NC)"
	@echo "$(BLUE)Agente: @$(AGENT)$(NC)"
	@echo "$(BLUE)Comando: $(COMMAND)$(NC)"
	@echo ""
	@echo "$(CYAN)‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó$(NC)"
	@echo "$(CYAN)‚ïë                    COMANDO PARA EXECUTAR                     ‚ïë$(NC)"
	@echo "$(CYAN)‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù$(NC)"
	@echo ""
	@echo "$(YELLOW)1. Abra um novo terminal$(NC)"
	@echo "$(YELLOW)2. Execute o comando abaixo:$(NC)"
	@echo ""
	@echo "$(GREEN)gemini $(MODEL_FLAG)$(NC)"
	@echo ""
	@echo "$(YELLOW)3. Dentro do Gemini CLI, digite:$(NC)"
	@echo ""
	@echo "$(CYAN)$(AGENT_PREFIX) @$(AGENT) $(COMMAND)$(NC)"
	@echo ""
	@echo "$(YELLOW)4. Quando terminar, digite '/exit' para sair$(NC)"
	@echo ""
	@printf "$(BLUE)Pressione ENTER quando tiver conclu√≠do o comando...$(NC)"
	@read dummy
	@echo "$(GREEN)‚úÖ Comando manual conclu√≠do!$(NC)"

# Valida√ß√µes internas
_check_oauth:
	@echo "$(BLUE)üîê Verificando autentica√ß√£o OAuth...$(NC)"

_check_gemini_cli:
	@if ! command -v gemini >/dev/null 2>&1; then \
		echo "$(RED)‚ùå Gemini CLI n√£o est√° instalado!$(NC)"; \
		echo "$(YELLOW)üí° Execute: make setup-gemini$(NC)"; \
		exit 1; \
	fi

# Adicionar valida√ß√µes aos comandos que precisam
brainstorm market-research plan-prd plan-arch validate create-epic create-stories implement-story: _check_oauth _check_gemini_cli

# Informa√ß√µes do projeto
info:
	@echo "$(CYAN)‚ÑπÔ∏è  Informa√ß√µes do Projeto:$(NC)"
	@echo "  Nome: $(PROJECT_NAME)"
	@echo "  Diret√≥rio: $(PWD)"
	@echo "  Makefile: $(MAKEFILE_LIST)"